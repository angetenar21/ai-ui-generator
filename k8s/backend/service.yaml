apiVersion: v1
kind: Service
metadata:
  name: backend-service
  labels:
    app: backend
    tier: api
spec:
  # Service type: ClusterIP = internal only (not exposed to internet)
  # Frontend will connect to this internally
  type: ClusterIP

  # Which pods does this service route traffic to?
  selector:
    app: backend

  ports:
  - port: 4000          # Port exposed inside the cluster
    targetPort: 4000    # Port the container listens on
    protocol: TCP
    name: http

  # Session affinity (optional - routes same client to same pod)
  sessionAffinity: None
